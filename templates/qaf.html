{% extends "base.html" %}

{% block content %}
<div class="grid-x">
  <h2 class="small-12">Welcome to the <strong>{{ qaf.name }}</strong> QAF</h2>
  <div class="small-10 small-offset-1">
    <br>
    <br>
    <a class="expanded button" href="/qaf/{{qaf.id}}/create_post">Make a Statement</a>
    <br>
    <br>
    {% for post in posts %}
      <div class="post">
        <h5 style="text-align:left">{{post.title}}</h5>
        <div class="small-12" style="text-align:left">Tags:
          {% for tag in post.tags %}
            <span class = "tag">{{ tag }}</span>
          {% endfor %}
        </div>
        <div>By <strong>{{post.get_author().username}}</strong> <span style="float:right;">{{post.time_created}}</span> </div><br>
        <div style="word-wrap: break-word;">
          {{post.content}}
        </div>
        <br>
        <div class="small-5">
          <h4 class="upvote" id="upvote{{post.id}}">⬆️</h4>
        </div>
        <div class="small-5 small-offset-2">
          <h4 class="downvote">⬇️</h4>
        </div>
        <a class="button expanded small-12" href="{{ url_for('show_post', qaf_id = qaf.id, post_id=post.id) }}"> Continue the Discussion </a>
      </div>
      <br>
    {% endfor %}
  </div>
</div>
<script type="text/javascript">
  document.getElementById("upvote").addEventListener("click", function fun() {
    $.getJSON('/upvote', {input: document.getElementById('upvote').value,}, function(data) {
          console.log(data.result.length);
          document.getElementById('searchResults').innerHTML = "";
          for (var x = 0; x < data.result.length; x++) {
            console.log(data.result[x]);
            document.getElementById('searchResults').innerHTML += '<a class=\"expanded button\" href=\"/qaf/'+data.result[x][0]+'\">'+data.result[x][1]+'</a>';
          }
        });
  });
</script>
{% endblock content %}
